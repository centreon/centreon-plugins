.. _jobQueueWaitJobCount:

**************************************************
Nombre de jobs en attente dans une jobqueue (JOBQ)
**************************************************

Description
^^^^^^^^^^^

+------------------+-----------------------------------------------------------------------------------------------------------------+
| Description      | Contrôle le nombre de job en attente dans une jobQueue sans tenir compte des priorités des jobs.                |
+------------------+-----------------------------------------------------------------------------------------------------------------+
| Fonctionnement   | Les jobs dans une jobqueue peuvent avoir plusieurs états :ACTIVE, HELD, ou SCHEDULED.                           |
|                  | Ok si le nombre de job en état HELD est inférieur au seuil warning.                                             |
|                  | Warning si le nombre de job en état HELD est au dessus du seuil warning.                                        |
|                  | Critical si le nombre de job en état HELD est au dessus du seuil critical.                                      |
+------------------+-----------------------------------------------------------------------------------------------------------------+
| API utilisée     | QSPRJOBQ, format JOBQ0100 & JOBQ0200                                                                            |
+------------------+-----------------------------------------------------------------------------------------------------------------+
| Autorité requise | *USE, *EXECUTE sur la jobQueue Library, *READ sur la jobQueue*JOBCTL sur les JobQueue contrôlé par OPRCTL(*YES) |
+------------------+-----------------------------------------------------------------------------------------------------------------+

Arguments de la commande
^^^^^^^^^^^^^^^^^^^^^^^^

+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
| Nom de la commande   | Nombre d'argument                                   | Arguments           |                           |           |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
| jobQueueWaitJobCount | 4                                                   | Ordre des arguments | Description               | Exemple   |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
|                      |                                                     | Argument 1          | Nom de la JobQueue        | QSYSNOMAX |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
|                      |                                                     | Argument 2          | Nom de la librairie       | QSYS      |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
|                      |                                                     | Argument 3          | Seuil warning (quantité)  | 1         |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
|                      |                                                     | Argument 4          | Seuil critique (quantité) | 2         |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+
| Métriques renvoyées  | activeJob=44 heldJobOnQueue=0 scheduledJobOnQueue=0 |                     |                           |           |
+----------------------+-----------------------------------------------------+---------------------+---------------------------+-----------+

Consommation réseau
^^^^^^^^^^^^^^^^^^^

+---------------------------------+-------------------------------+
| Download (as400 vers connector) | Upload (connector vers as400) |
+---------------------------------+-------------------------------+
| 750 o                           | 800 o                         |
+---------------------------------+-------------------------------+

Exemple de configuration
^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------------------+
| Macro name | Macro value          |
+------------+----------------------+
| CHECK      | jobQueueWaitJobCount |
+------------+----------------------+
| ARGS       | QSYSNOMAX!QSYS!1!2   |
+------------+----------------------+
