.. _messageQueueSize:

***********************************************
Nombre de message dans une message queue (MSGQ)
***********************************************

Description
^^^^^^^^^^^

+------------------+------------------------------------------------------------------------------------------------------+
| Description      | Contrôle la taille de la messageQueue.                                                               |
+------------------+------------------------------------------------------------------------------------------------------+
| Fonctionnement   | Récupère tous les message dont la sévérité est supérieur ou égale à celle défini dans les arguments. |
|                  | Ok si le nombre de message est en dessous du seuil warning.                                          |
|                  | Warning si le nombre de message est au dessus du seuil warning.                                      |
|                  | Critical si le nombre de message est au dessus du seuil critical.                                    |
+------------------+------------------------------------------------------------------------------------------------------+
| API utilisée     | QGYOLMSG format LSTM0100, QGYGTLE, QGYCLST                                                           |
+------------------+------------------------------------------------------------------------------------------------------+
| Autorité requise | *USE sur la messageQueue, *EXECUTE sur la messageQueue library                                       |
+------------------+------------------------------------------------------------------------------------------------------+

Arguments de la commande
^^^^^^^^^^^^^^^^^^^^^^^^

+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
| Nom de la commande  | Nombre d'argument | Arguments           |                                                          |                        |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
| messageQueueSize    | 4                 | Ordre des arguments | Description                                              | Exemple                |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
|                     |                   | Argument 1          | Nom de la messageQueue                                   | /QSYS.LIB/QSYSOPR.MSGQ |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
|                     |                   | Argument 2          | Niveau de sévérité minimum pour comptabiliser le message | 40                     |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
|                     |                   | Argument 3          | Seuil warning (quantité)                                 | 2000                   |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
|                     |                   | Argument 4          | Seuil critique (quantité)                                | 2500                   |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+
| Métriques renvoyées | count=1234        |                     |                                                          |                        |
+---------------------+-------------------+---------------------+----------------------------------------------------------+------------------------+

Consommation réseau
^^^^^^^^^^^^^^^^^^^

+-------------------------------------------------+---------------------------------+-------------------------------+
| Nombre de message présent dans la message queue | Download (as400 vers connector) | Upload (connector vers as400) |
+-------------------------------------------------+---------------------------------+-------------------------------+
| 1 (théorique)                                   | 2,26 ko                         | 66 o                          |
+-------------------------------------------------+---------------------------------+-------------------------------+
| 5000                                            | 11 mo                           | 325 ko                        |
+-------------------------------------------------+---------------------------------+-------------------------------+

Exemple de configuration
^^^^^^^^^^^^^^^^^^^^^^^^

+------------+-------------------------------------+
| Macro name | Macro value                         |
+------------+-------------------------------------+
| CHECK      | messageQueueSize                    |
+------------+-------------------------------------+
| ARGS       | /QSYS.LIB/QSYSOPR.MSGQ!40!2000!2500 |
+------------+-------------------------------------+
