.. _configurationCentreon:

######################
Configuration Centreon
######################

La configuration des templates Centreon n'est nécéssaire que lors de l'installation par tarball.
Afin d'exploiter pleinement Centreon-Connector-AS400, il est recommandé d'effectuer une série d'action préalablement.


Création d'une commande de check générique
==========================================
 
Aller dans le menu « Configuration → Commande » et créer une commande « check_as400_generic ».

Insérer la commande : 

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| $USER1$/check_centreon_as400_generic \-\-connector "$_HOSTDAEMONHOST$:$_HOSTDAEMONPORT$" \-\-host "$HOSTADDRESS$" \-\-user "$_HOSTAS400USER$" \-\-password "$_HOSTAS400PASSWORD$" \-\-check "$_SERVICECHECK$" \-\-args "$_SERVICEARGS$" |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Cette commande comporte une série de macros utilisées à différents niveau des modèles d'hôtes, hôtes, modèles de services, services.

Les macro précédé de HOST sont récupérés au niveau de la définition de l'hôte (ou le modèle d'hôte). Les macros précédé de SERVICE sont récupérés u niveau de la définition du service. (ou le modèle de service).

+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| Macro name        | Macro value                                            | Ressource ou la macro doit être défini (recommandé)     |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| HOSTDAEMONHOST    | IP ou nom d'hôte du serveur exécutant le daemon AS/400 | Modèle d'hôte AS/400 de plus bas niveau                 |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| HOSTDAEMONPORT    | Port du daemon                                         | Modèle d'hôte AS/400 de plus bas niveau                 |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| HOSTAS400USER     | Nom d'utilisateur AS/400                               | Hôte AS/400                                             |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| HOSTAS400PASSWORD | Mot de passe AS/400                                    | Hôte AS/400                                             |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| SERVICECHECK      | Commande de check                                      | Service ou modèle de service AS/400 de plus haut niveau |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+
| SERVICEARGS       | Arguments de la commande de check                      | Service ou modèle de service AS/400 de plus haut niveau |
+-------------------+--------------------------------------------------------+---------------------------------------------------------+

Création d'un modele d'hote AS400 générique
===========================================

Aller dans le menu « Configuration → Hosts → Templates » et créer un modèle d'hôte « as400 ». Ce modèle d'hôte sera le modèle de plus bas niveau pour tous les hôtes AS/400. D'autres modèle de plus haut niveau pourront être créé. Configurer l'ensemble des champs comme indiqué dans la documentation Centreon. 

Définir les macros suivante : 

+------------+-----------------------+
| Macro name | Macro value           |
+------------+-----------------------+
| DAEMONHOST | Exemple : 10.30.10.30 |
+------------+-----------------------+
| DAEMONPORT | Exemple : 8091        |
+------------+-----------------------+

**None**


Création d'un hôte AS400
========================

Aller dans le menu « Configuration → Hosts » et créer un hôte basé sur le modèle « as400 » générique (ou un modèle de plus haut niveau basé sur le modèle « as400 » générique ).

Définir les macros suivante : 

+---------------+-----------------------+
| Macro name    | Macro value           |
+---------------+-----------------------+
| AS400USER     | Exemple : USER123     |
+---------------+-----------------------+
| AS400PASSWORD | Exemple : PASSWORD123 |
+---------------+-----------------------+



Création d'un modele de service AS400
=====================================

Aller dans le menu « Configuration → Services » ou « Template », et créer un service et ou modèle de service.

Définir les macros suivante : 

+------------+--------------------+
| Macro name | Macro value        |
+------------+--------------------+
| CHECK      | Exemple : cpuUsage |
+------------+--------------------+
| ARGS       | Exemple : 80!90    |
+------------+--------------------+

Les différentes commandes et arguments sont expliqués dans la partie "Liste des indicateurs"


