.. _allJobHaveNoMsgWInSubSystem:

*********************************************************
Check amount of job in a subsystem with a specific status
*********************************************************

Description
^^^^^^^^^^^

+--------------------+-------------------------------------------------------------------------------------------------+
| Description        | Check amount of job in a subsystem with a specific status                                       |
+--------------------+-------------------------------------------------------------------------------------------------+
| Operation          | OK si le nombre de job en attente de message est inférieur ou égal au warning count             |
|                    | WARNING si le nombre de job en attente de message est inferieur au "critical count »            |
|                    | CRITICAL si le nombre de job en attente de message est superieur ou égal au « critical count ». |
+--------------------+-------------------------------------------------------------------------------------------------+
| Used API           | QGYOLJOB format OLJB0200, QGYGTLE, QGYCLST                                                      |
+--------------------+-------------------------------------------------------------------------------------------------+
| Required authority | *USE                                                                                            |
+--------------------+-------------------------------------------------------------------------------------------------+

Command argument
^^^^^^^^^^^^^^^^

+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
| Command name           | Number of arguments                             | Arguments       |                                     |          |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
| specificJobInSubSystem | 8                                               | arguments order | Description                         | Exemple  |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 1      | Job pattern (regex)                 | ^JOBC.*$ |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 2      | SubSystem                           | QBASE    |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 3      | Status                              | *ANY     |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 4      | StatusActive                        | ANY      |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 5      | Warning minimal threshold (amount)  | 2        |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 6      | Warning maximal threshold (amount)  | 5        |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 7      | Critical minimal threshold (amount) | 1        |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
|                        |                                                 | Argument 8      | Critical maximal threshold (amount) | 10       |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
| Metrics returned       | foundJob=123 statusMatchingJob=1                |                 |                                     |          |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+
| Output returned        | Amount of job found matching pattern and status |                 |                                     |          |
+------------------------+-------------------------------------------------+-----------------+-------------------------------------+----------+

All Status and StatusActive can be found here : 
http://publib.boulder.ibm.com/iseries/v5r1/ic2924/index.htm?info/apis/qusrjobi.htm

Centreon-Connector-AS400 add 1 status (*ANY) and 1 statusActive (ANY), to match all existing status.

Status can have value: *ANY, *OUTQ, *ACTIVE, *JOBQ
StatusActive can have value:  BSCA, BSCW, CMNA, CMNW, CMTW ... (see IBM documentation)




Network usage
^^^^^^^^^^^^^

+------------------------------+-------------------------------+-----------------------------+
| Amount of jobs on the server | Download (as400 to connector) | Upload (connector to as400) |
+------------------------------+-------------------------------+-----------------------------+
| 1 (theoretic)                | 77 o                          | 2,3 o                       |
+------------------------------+-------------------------------+-----------------------------+
| 10000                        | 750 ko                        | 23 ko                       |
+------------------------------+-------------------------------+-----------------------------+

Configuration exemple
^^^^^^^^^^^^^^^^^^^^^

+------------+------------------------+
| Macro name | Macro value            |
+------------+------------------------+
| CHECK      | specificJobInSubSystem |
+------------+------------------------+
| ARGS       | QBASE!1!2              |
+------------+------------------------+
