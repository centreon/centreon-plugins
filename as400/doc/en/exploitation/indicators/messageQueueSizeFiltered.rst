.. _messageQueueSizeFiltered:

*******************************************************************************************************************
Check to count message in messageQueue (MSGQ) according to their severity and message ID (messageQueueSizeFiltered)
*******************************************************************************************************************

Description
^^^^^^^^^^^

+--------------------+-----------------------------------------------------------------------------------------------------------------------+-+
| Description        | Count amount of messages in messageQueue (MSGQ) according to their severity and message ID (messageQueueSizeFiltered) | |
+--------------------+-----------------------------------------------------------------------------------------------------------------------+-+
| Operation          | Retrieves all messages whose severity is between min and max severity level, and whose message ID match the regex     | |
|                    | Ok if the number of messages is below the warning threshold.                                                          | |
|                    | Warning message if the number is above the warning threshold.                                                         | |
|                    | Critical if the message number is above the critical threshold.                                                       | |
+--------------------+-----------------------------------------------------------------------------------------------------------------------+-+
| Used API           | QGYOLMSG format LSTM0100, QGYGTLE, QGYCLST                                                                            | |
+--------------------+-----------------------------------------------------------------------------------------------------------------------+-+
| Required authority | *USE sur la messageQueue, *EXECUTE sur la messageQueue library                                                        | |
+--------------------+-----------------------------------------------------------------------------------------------------------------------+-+

Command argument
^^^^^^^^^^^^^^^^

+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
| Command name             | Number of arguments | Arguments       |                             |                        |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
| messageQueueSizeFiltered | 6                   | Arguments order | Description                 | Exemple                |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
|                          |                     | Argument 1      | messageQueue name           | /QSYS.LIB/QSYSOPR.MSGQ |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
|                          |                     | Argument 2      | Regex filtering message ID  | ^CP.*$                 |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
|                          |                     | Argument 3      | Minimal severity level      | 60                     |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
|                          |                     | Argument 4      | Maximal severity level      | 80                     |
|                          |                     |                 | Maximal severity exluded    |                        |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
|                          |                     | Argument 5      | Warning threshold (amount)  | 1                      |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
|                          |                     | Argument 6      | Critical threshold (amount) | 2                      |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+
| Metrics returned         | count=1234          |                 |                             |                        |
+--------------------------+---------------------+-----------------+-----------------------------+------------------------+

Network usage
^^^^^^^^^^^^^

+---------------------------------------+-------------------------------+-----------------------------+
| Amount of message in the messageQueue | Download (as400 to connector) | Upload (connector to as400) |
+---------------------------------------+-------------------------------+-----------------------------+
| 1 (th√©orique)                         | 2,26 ko                       | 66 o                        |
+---------------------------------------+-------------------------------+-----------------------------+
| 5000                                  | 11 mo                         | 325 ko                      |
+---------------------------------------+-------------------------------+-----------------------------+

Configuration exemple
^^^^^^^^^^^^^^^^^^^^^

+------------+-----------------------------------------+
| Macro name | Macro value                             |
+------------+-----------------------------------------+
| CHECK      | messageQueueSize                        |
+------------+-----------------------------------------+
| ARGS       | /QSYS.LIB/QSYSOPR.MSGQ!^CP.*$!60!80!1!2 |
+------------+-----------------------------------------+
