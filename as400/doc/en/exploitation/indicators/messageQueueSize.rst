.. _messageQueueSize:

***************************************************
Check the size of a MessageQueue (messageQueueSize)
***************************************************

Description
^^^^^^^^^^^

+--------------------+-------------------------------------------------------------------------------------+-+
| Description        | Check the size of a MessageQueue                                                    | |
+--------------------+-------------------------------------------------------------------------------------+-+
| Operation          | Retrieves all messages whose severity is greater or equal to minimum severity level | |
|                    | Ok if the number of messages is below the warning threshold.                        | |
|                    | Warning message if the number is above the warning threshold.                       | |
|                    | Critical if the message number is above the critical threshold.                     | |
+--------------------+-------------------------------------------------------------------------------------+-+
| Used API           | QGYOLMSG format LSTM0100, QGYGTLE, QGYCLST                                          | |
+--------------------+-------------------------------------------------------------------------------------+-+
| Required authority | *USE sur la messageQueue, *EXECUTE sur la messageQueue library                      | |
+--------------------+-------------------------------------------------------------------------------------+-+

Arguments de la commande
^^^^^^^^^^^^^^^^^^^^^^^^

+------------------+---------------------+-----------------+-----------------------------+------------------------+
| Command name     | Number of arguments | Arguments       |                             |                        |
+------------------+---------------------+-----------------+-----------------------------+------------------------+
| messageQueueSize | 4                   | Arguments order | Description                 | Exemple                |
+------------------+---------------------+-----------------+-----------------------------+------------------------+
|                  |                     | Argument 1      | MessageQueue name           | /QSYS.LIB/QSYSOPR.MSGQ |
+------------------+---------------------+-----------------+-----------------------------+------------------------+
|                  |                     | Argument 2      | Minimum severity level      | 40                     |
+------------------+---------------------+-----------------+-----------------------------+------------------------+
|                  |                     | Argument 3      | Warning threshold (amount)  | 2000                   |
+------------------+---------------------+-----------------+-----------------------------+------------------------+
|                  |                     | Argument 4      | Critical threshold (amount) | 2500                   |
+------------------+---------------------+-----------------+-----------------------------+------------------------+
| Metrics returned | count=1234          |                 |                             |                        |
+------------------+---------------------+-----------------+-----------------------------+------------------------+

Network usage
^^^^^^^^^^^^^

+---------------------------------------+-------------------------------+-----------------------------+
| Amount of message in the messageQueue | Download (as400 to connector) | Upload (connector to as400) |
+---------------------------------------+-------------------------------+-----------------------------+
| 1 (th√©orique)                         | 2,26 ko                       | 66 o                        |
+---------------------------------------+-------------------------------+-----------------------------+
| 5000                                  | 11 mo                         | 325 ko                      |
+---------------------------------------+-------------------------------+-----------------------------+

Configuration exemple
^^^^^^^^^^^^^^^^^^^^^

+------------+-------------------------------------+
| Macro name | Macro value                         |
+------------+-------------------------------------+
| CHECK      | messageQueueSize                    |
+------------+-------------------------------------+
| ARGS       | /QSYS.LIB/QSYSOPR.MSGQ!40!2000!2500 |
+------------+-------------------------------------+
