.. _allJobHaveNoMsgWInSubSystem:

***********************************************************************
Controle le nombre de job running (RUN) dans un sous systeme spécifique
***********************************************************************

Description
^^^^^^^^^^^

+------------------+-------------------------------------------------------------------------------------------------+
| Description      | Controle l'ensemble des jobs d'un sous systeme en état running                                  |
+------------------+-------------------------------------------------------------------------------------------------+
| Fonctionnement   | OK si le nombre de job en attente de message est inférieur ou égal au warning count             |
|                  | WARNING si le nombre de job en attente de message est inferieur au "critical count »            |
|                  | CRITICAL si le nombre de job en attente de message est superieur ou égal au « critical count ». |
+------------------+-------------------------------------------------------------------------------------------------+
| API utilisée     | QGYOLJOB format OLJB0200, QGYGTLE, QGYCLST                                                      |
+------------------+-------------------------------------------------------------------------------------------------+
| Autorité requise | *USE                                                                                            |
+------------------+-------------------------------------------------------------------------------------------------+

Arguments de la commande
^^^^^^^^^^^^^^^^^^^^^^^^
String jobPattern, String subSystem, int warningMin, int warningMax, int criticalMin, int criticalMax

+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
| Nom de la commande            | Nombre d'argument                     | Arguments           |                                   |          |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
| specificJobRunningInSubSystem | 6                                     | Ordre des arguments | Description                       | Exemple  |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
|                               |                                       | Argument 1          | Job pattern (regex)               | ^JOBC.*$ |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
|                               |                                       | Argument 2          | Sous system                       | QBASE    |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
|                               |                                       | Argument 3          | Seuil Warning minimal (quantité)  | 2        |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
|                               |                                       | Argument 4          | Seuil Warning maximal (quantité)  | 5        |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
|                               |                                       | Argument 5          | Seuil Critical minimal (quantité) | 1        |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
|                               |                                       | Argument 6          | Seuil Critical maximal (quantité) | 10       |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
| Métriques renvoyées           | totalJob=123 jobMSGW=1                |                     |                                   |          |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+
| Output renvoyé                | Le nom des jobs en attente de message |                     |                                   |          |
+-------------------------------+---------------------------------------+---------------------+-----------------------------------+----------+

Network usage
^^^^^^^^^^^^^

+------------------------------+-------------------------------+-----------------------------+
| Amount of jobs on the server | Download (as400 to connector) | Upload (connector to as400) |
+------------------------------+-------------------------------+-----------------------------+
| 1 (theoretic)                | 77 o                          | 2,3 o                       |
+------------------------------+-------------------------------+-----------------------------+
| 10000                        | 750 ko                        | 23 ko                       |
+------------------------------+-------------------------------+-----------------------------+

Configuration exemple
^^^^^^^^^^^^^^^^^^^^^

+------------+-----------------------------+
| Macro name | Macro value                 |
+------------+-----------------------------+
| CHECK      | allJobHaveNoMsgWInSubSystem |
+------------+-----------------------------+
| ARGS       | QBASE!1!2                   |
+------------+-----------------------------+
