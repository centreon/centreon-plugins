.. _mode:

##############
Operating mode
##############

Centreon-Connector-AS400 can run in daemon mode or command line.
It's also packaged with check plugin, connecting to the daemon, and responsible to transmitt the results to engine/nagios.

Command line
============

With command line, a java virtual machine is started each time. This mode should be used only for testing purposes, toi avoid high CPU / memory consomption::
  
  +-------------------------------------------------------------------------------------------------------------+
  | java -jar connector-as400-1.x.x.jar -I -H %HOST% --login %LOGIN% --password %PASSWORD% -C %CHECK% -A %ARGS% |
  +-------------------------------------------------------------------------------------------------------------+

Enter the different arguments:

+-----------+---------------------------------------+-------------+
| Attribute | Description                           | Exemple     |
+===========+=======================================+=============+
| HOST      | IP address or host name of the AS/400 | 10.30.10.30 |
+-----------+---------------------------------------+-------------+
| LOGIN     | AS/400 user name                      | USER123     |
+-----------+---------------------------------------+-------------+
| PASSWORD  | AS/400 password                       | PASSWORD123 |
+-----------+---------------------------------------+-------------+
| CHECK     | Check command                         | cpuUsage    |
+-----------+---------------------------------------+-------------+
| ARGS      | Check command arguments               | 80!90       |
+-----------+---------------------------------------+-------------+

Note: The command arguments are separated by " ! " .

Daemon
======

The daemon mode permit to launch the same commands than from command line without having to restart a java virtual machine at each use.
The daemon listens on a port, waiting for query.
A check plugin ( check_centreon_as400_generic ) is available to connect to the daemon and return a result to the Nagios format.
Check plugin arguments are similar to the java program. However, it is necessary to specify the address and port of the daemon::
  
  +----------------------------------------------------------------------------------------------------------------------------------------------------------------+
  | check_centreon_as400_generic \-\-connector %DAEMONHOST%:%DAEMONPORT% \-\-host %HOST% \-\-user %USER% \-\-password %PASSWORD% \-\-check %CHECK% \-\-args %ARGS% |
  +----------------------------------------------------------------------------------------------------------------------------------------------------------------+

Enter the different arguments:

+------------+--------------------------------------------------------+-------------+
| Attribut   | Description                                            | Exemple     |
+============+========================================================+=============+
| DAEMONHOST | IP address or host name of the server executing daemon | 10.30.10.20 |
+------------+--------------------------------------------------------+-------------+
| DAEMONPORT | Daemon port                                            | 8091        |
+------------+--------------------------------------------------------+-------------+
| HOST       | IP address or host name of the AS/400                  | 10.30.10.30 |
+------------+--------------------------------------------------------+-------------+
| LOGIN      | AS/400 user name                                       | USER123     |
+------------+--------------------------------------------------------+-------------+
| PASSWORD   | AS/400 password                                        | PASSWORD123 |
+------------+--------------------------------------------------------+-------------+
| CHECK      | Check command                                          | cpuUsage    |
+------------+--------------------------------------------------------+-------------+
| ARGS       | Check command arguments                                | 80!90       |
+------------+--------------------------------------------------------+-------------+

Note: The command arguments are separated by " ! " .
