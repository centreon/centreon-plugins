.. _configurationCentreon:

######################
Centreon configuration
######################

Template configuration in Centreon are on necessary when using the tarball installation.
To fully exploit Centreon-Connector-AS400, it is recommanded to perform a series of actions.

Create a generic check command
==============================

Go to the « Configuration → Commande » menu and create a " check_as400_generic " command.

Insert the command:

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| $USER1$/check_centreon_as400_generic \-\-connector "$_HOSTDAEMONHOST$:$_HOSTDAEMONPORT$" \-\-host "$HOSTADDRESS$" \-\-user "$_HOSTAS400USER$" \-\-password "$_HOSTAS400PASSWORD$" \-\-check "$_SERVICECHECK$" \-\-args "$_SERVICEARGS$" |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

This command has a series of macros used at different level of host templates , hosts, service templates, services.

Macro prefixed with HOST are retrieved from the host definition (or host template). 
Macros prefixed with SERVICE are retrieved from the service definition. (or service template) .

+---------------+--------------------------------------------------------+--------------------------------------------------------+
| Macro name    | Macro value                                            | Resource where the macro must be defined (recommanded) |
+---------------+--------------------------------------------------------+--------------------------------------------------------+
| DAEMONHOST    | IP or hostname of the server running the daemon AS/400 | Lowest level AS/400 host template                      |
+---------------+--------------------------------------------------------+--------------------------------------------------------+
| DAEMONPORT    | Daemon port                                            | Lowest level AS/400 host template                      |
+---------------+--------------------------------------------------------+--------------------------------------------------------+
| AS400USER     | AS/400 user name                                       | AS/400 Host                                            |
+---------------+--------------------------------------------------------+--------------------------------------------------------+
| AS400PASSWORD | AS/400 password                                        | AS/400 Host                                            |
+---------------+--------------------------------------------------------+--------------------------------------------------------+
| CHECK         | Check command                                          | Service or AS/400 model service of the highest level   |
+---------------+--------------------------------------------------------+--------------------------------------------------------+
| ARGS          | Check command arguments                                | Service or AS/400 model service of the highest level   |
+---------------+--------------------------------------------------------+--------------------------------------------------------+

Create a generic host template
==============================

Go to the menu « Configuration → Hosts → Templates » and create an host template « as400 ». 
This model will be the lowest level host template for all AS/400 hosts. Other higher level host template can be created . 
Configure all the fields as shown in Centreon documentation. 

Define the following macros :

+------------+-----------------------+
| Macro name | Macro value           |
+------------+-----------------------+
| DAEMONHOST | Exemple : 10.30.10.30 |
+------------+-----------------------+
| DAEMONPORT | Exemple : 8091        |
+------------+-----------------------+

Create an as400 host
====================

Go to the " Configuration → Hosts " menu and create an host based on the host template "as400" generic (or a higher-level host template based on the template "as400" generic) .

Define the following macros:

+---------------+-----------------------+
| Macro name    | Macro value           |
+---------------+-----------------------+
| AS400USER     | Exemple : USER123     |
+---------------+-----------------------+
| AS400PASSWORD | Exemple : PASSWORD123 |
+---------------+-----------------------+


Create a service template or service
====================================

Go « Configuration → Services » or « Template », and create a service or service template

Define the following maccro 

+------------+--------------------+
| Macro name | Macro value        |
+------------+--------------------+
| CHECK      | Exemple : cpuUsage |
+------------+--------------------+
| ARGS       | Exemple : 80!90    |
+------------+--------------------+

The various commands and arguments are explained in the " List of indicators "
