name: set-pull-request-skip-label

on:
  workflow_call:

jobs:
  set-pull-request-skip-label:
    if: ${{ success() && contains(fromJSON('["pull_request"]') , github.event_name) }}
    runs-on: ubuntu-24.04

    steps:
      - name: Set PR skip label
        uses: actions/github-script@ed597411d8f924073f98dfc5c65a23a2325f34cd # v8.0.0
        with:
          script: |
            const label = '${{ format('skip-workflow-{0}', github.workflow) }}';
            try {
              await github.rest.issues.addLabels({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                labels: [label]
              });
            } catch (e) {
              core.warning(`failed to add label ${label}: ${e}`);
            }
