*** Settings ***
Documentation       Check Hardware (Fans, Power supplies, chassis, io cards, blades, fabric extenders).

Resource            ${CURDIR}${/}..${/}..${/}..${/}..${/}..${/}resources/import.resource

Suite Setup         Ctn Generic Suite Setup
Test Timeout        120s


*** Variables ***
${CMD}      ${CENTREON_PLUGINS} --plugin=hardware::server::cisco::ucs::snmp::plugin


*** Test Cases ***
equipment ${tc}
    [Tags]    hardware    snmp
    ${command}    Catenate
    ...    ${CMD}
    ...    --mode=equipment
    ...    --hostname=${HOSTNAME}
    ...    --snmp-version=${SNMPVERSION}
    ...    --snmp-port=${SNMPPORT}
    ...    --snmp-community=hardware/server/cisco/ucs/snmp/slim-ucs-equipment
    ...    --snmp-timeout=10
    ...    --snmp-force-getnext
    ...    --snmp-retries=7
    ...    ${extra_options}
 
    Ctn Verify Command Output    ${command}    ${expected_result}

    Examples:        tc    extra_options                                                                                                expected_result    --
            ...      1     --threshold-overload='presence,OK,missing' --threshold-overload='operability,OK,removed'                     OK: All 100 components are ok [100/100 memories]. | 'hardware.memory.count'=100;;;;
            ...      2     --threshold-overload='presence,UNKNOWN,missing' --component='memory'                                         UNKNOWN: memory 'Anonymized-001/mem-12' presence is: 'missing' - memory 'Anonymized-001/mem-15' presence is: 'missing' - memory 'Anonymized-001/mem-18' presence is: 'missing' - memory 'Anonymized-001/mem-3' presence is: 'missing' - memory 'Anonymized-001/mem-6' presence is: 'missing' - memory 'Anonymized-001/mem-9' presence is: 'missing' - memory 'Anonymized-001/mem-21' presence is: 'missing' - memory 'Anonymized-001/mem-24' presence is: 'missing' - memory 'Anonymized-002/mem-23' presence is: 'missing' - memory 'Anonymized-002/mem-15' presence is: 'missing' - memory 'Anonymized-002/mem-9' presence is: 'missing' - memory 'Anonymized-002/mem-21' presence is: 'missing' - memory 'Anonymized-002/mem-16' presence is: 'missing'
            ...      3     --threshold-overload='operability,WARNING,missing' --component='memory'                                      WARNING: memory 'Anonymized-001/mem-12' presence is: 'missing' - memory 'Anonymized-001/mem-15' presence is: 'missing' - memory 'Anonymized-001/mem-18' presence is: 'missing' - memory 'Anonymized-001/mem-3' presence is: 'missing' - memory 'Anonymized-001/mem-6' presence is: 'missing' - memory 'Anonymized-001/mem-9' presence is: 'missing' - memory 'Anonymized-001/mem-21' presence is: 'missing' - memory 'Anonymized-001/mem-24' presence is: 'missing' - memory 'Anonymized-002/mem-23' presence is: 'missing' - memory 'Anonymized-002/mem-15' presence is: 'missing' - memory 'Anonymized-002/mem-9' presence is: 'missing' - memory 'Anonymized-002/mem-21' presence is: 'missing' - memory 'Anonymized-002/mem-16' presence is: 'missing' - memory 'Anonymized-002/mem-18' presence is: 'missing' - memory 'Anonymized-002/mem-11' presence is: 'missing'
            ...      4     --component='cpu'                                                                                            OK: All 0 components are ok [].
            ...      5     --filter=fan,/sys/chassis-7/fan-module-1-7/fan-1                                                             WARNING: memory 'Anonymized-001/mem-12' presence is: 'missing' - memory 'Anonymized-001/mem-15' presence is: 'missing' - memory 'Anonymized-001/mem-18' presence is: 'missing' - memory 'Anonymized-001/mem-3' presence is: 'missing' - memory 'Anonymized-001/mem-6' presence is: 'missing' - memory 'Anonymized-001/mem-9' presence is: 'missing' - memory 'Anonymized-001/mem-21' presence is: 'missing' - memory 'Anonymized-001/mem-24' presence is: 'missing' - memory 'Anonymized-002/mem-23' presence is: 'missing' - memory 'Anonymized-002/mem-15' presence is: 'missing' - memory 'Anonymized-002/mem-9' presence is: 'missing' - memory 'Anonymized-002/mem-21' presence is: 'missing' - memory 'Anonymized-002/mem-16' presence is: 'missing' - memory 'Anonymized-002/mem-18' presence is: 'missing' - memory 'Anonymized-002/mem-11' presence is: 'missing' - memory 'Anonymized-002/mem-22' presence is: 'missing' - memory 'Anonymized-002/mem-12'
            ...      6     --absent-problem=fan,/sys/chassis-7/fan-module-1-7/fan-1                                                     WARNING: memory 'Anonymized-001/mem-12' presence is: 'missing' - memory 'Anonymized-001/mem-15' presence is: 'missing' - memory 'Anonymized-001/mem-18' presence is: 'missing' - memory 'Anonymized-001/mem-3' presence is: 'missing' - memory 'Anonymized-001/mem-6' presence is: 'missing' - memory 'Anonymized-001/mem-9' presence is: 'missing' - memory 'Anonymized-001/mem-21' presence is: 'missing' - memory 'Anonymized-001/mem-24' presence is: 'missing' - memory 'Anonymized-002/mem-23' presence is: 'missing' - memory 'Anonymized-002/mem-15' presence is: 'missing' - memory 'Anonymized-002/mem-9' presence is: 'missing' - memory 'Anonymized-002/mem-21' presence is: 'missing' - memory 'Anonymized-002/mem-16' presence is: 'missing' - memory 'Anonymized-002/mem-18' presence is: 'missing' - memory 'Anonymized-002/mem-11' presence is: 'missing' - memory 'Anonymized-002/mem-22' presence is: 'missing' - memory 'Anonymized-002/mem-12'
            ...      7     --no-component=UNKNOWN                                                                                       WARNING: memory 'Anonymized-001/mem-12' presence is: 'missing' - memory 'Anonymized-001/mem-15' presence is: 'missing' - memory 'Anonymized-001/mem-18' presence is: 'missing' - memory 'Anonymized-001/mem-3' presence is: 'missing' - memory 'Anonymized-001/mem-6' presence is: 'missing' - memory 'Anonymized-001/mem-9' presence is: 'missing' - memory 'Anonymized-001/mem-21' presence is: 'missing' - memory 'Anonymized-001/mem-24' presence is: 'missing' - memory 'Anonymized-002/mem-23' presence is: 'missing' - memory 'Anonymized-002/mem-15' presence is: 'missing' - memory 'Anonymized-002/mem-9' presence is: 'missing' - memory 'Anonymized-002/mem-21' presence is: 'missing' - memory 'Anonymized-002/mem-16' presence is: 'missing' - memory 'Anonymized-002/mem-18' presence is: 'missing' - memory 'Anonymized-002/mem-11' presence is: 'missing' - memory 'Anonymized-002/mem-22' presence is: 'missing' - memory 'Anonymized-002/mem-12' presence is: 'missing'
            ...      8     --threshold-overload='presence,CRITICAL,equipped'                                                            CRITICAL: memory 'Anonymized-001/mem-10' presence is: 'equipped' - memory 'Anonymized-001/mem-11' presence is: 'equipped' - memory 'Anonymized-001/mem-13' presence is: 'equipped' - memory 'Anonymized-001/mem-14' presence is: 'equipped' - memory 'Anonymized-001/mem-16' presence is: 'equipped' - memory 'Anonymized-001/mem-17' presence is: 'equipped' - memory 'Anonymized-001/mem-19' presence is: 'equipped' - memory 'Anonymized-001/mem-1' presence is: 'equipped' - memory 'Anonymized-001/mem-2' presence is: 'equipped' - memory 'Anonymized-001/mem-4' presence is: 'equipped' - memory 'Anonymized-001/mem-5' presence is: 'equipped' - memory 'Anonymized-001/mem-7' presence is: 'equipped' - memory 'Anonymized-001/mem-8' presence is: 'equipped' - memory 'Anonymized-001/mem-20' presence is: 'equipped' - memory 'Anonymized-001/mem-22' presence is: 'equipped' - memory 'Anonymized-001/mem-23' presence is: 'equipped'
            ...      9     ${EMPTY}                                                                                                     WARNING: memory 'Anonymized-001/mem-12' presence is: 'missing' - memory 'Anonymized-001/mem-15' presence is: 'missing' - memory 'Anonymized-001/mem-18' presence is: 'missing' - memory 'Anonymized-001/mem-3' presence is: 'missing' - memory 'Anonymized-001/mem-6' presence is: 'missing' - memory 'Anonymized-001/mem-9' presence is: 'missing' - memory 'Anonymized-001/mem-21' presence is: 'missing' - memory 'Anonymized-001/mem-24' presence is: 'missing' - memory 'Anonymized-002/mem-23' presence is: 'missing' - memory 'Anonymized-002/mem-15' presence is: 'missing' - memory 'Anonymized-002/mem-9' presence is: 'missing' - memory 'Anonymized-002/mem-21' presence is: 'missing' - memory 'Anonymized-002/mem-16' presence is: 'missing' - memory 'Anonymized-002/mem-18' presence is: 'missing' - memory 'Anonymized-002/mem-11' presence is: 'missing' - memory 'Anonymized-002/mem-22' presence is: 'missing' - memory 'Anonymized-002/mem-12' presence is: 'missing' - memory 'Anonymized-002/mem-7'